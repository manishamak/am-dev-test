(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,a=window.wp.element,n=window.wp.components,l=window.wp.apiFetch;var r=e.n(l);const i=window.wp.blockEditor,o=window.wp.i18n;function s(e){let{header:t,attributes:n}=e;const l=new Array;for(let e=0;e<t.length;e++){const r=t[e].replace(" ","_").toLowerCase();l.push([(0,a.createElement)(a.Fragment,null,n[r]&&(0,a.createElement)("th",null,t[e]))])}return l}function m(e){let{rows:t,attributes:n}=e;const l=new Array;return Object.values(t).forEach((e=>{const t=new Date(1e3*e.date);l.push([(0,a.createElement)("tr",{key:"mm-api-data-display-table-rows"},n.id&&(0,a.createElement)("td",null,e.id),n.first_name&&(0,a.createElement)("td",null,e.fname),n.last_name&&(0,a.createElement)("td",null,e.lname),n.email&&(0,a.createElement)("td",null,e.email),n.date&&(0,a.createElement)("td",null,t.toLocaleDateString("en-US")))])})),l}const c=JSON.parse('{"u2":"manisha-makhija/api-data-display"}');(0,t.registerBlockType)(c.u2,{example:{attributes:{preview:!0}},edit:function(e){let{attributes:t,setAttributes:l}=e;const[c,d]=(0,a.useState)(null),[h,u]=(0,a.useState)(null),[p,w]=(0,a.useState)(!1),E=[(0,a.createElement)(i.InspectorControls,{key:"mm-api-data-display-block-inspector-controls"},(0,a.createElement)(n.PanelBody,{title:(0,o.__)("Manage Table columns","manisha-makhija"),key:"mm-api-data-display-block-panel-body",initialOpen:!0},(0,a.createElement)(n.ToggleControl,{label:(0,o.__)("Show ID","manisha-makhija"),onChange:e=>{l({id:e})},checked:t.id}),(0,a.createElement)(n.ToggleControl,{label:(0,o.__)("Show First Name","manisha-makhija"),onChange:e=>{l({first_name:e})},checked:t.first_name}),(0,a.createElement)(n.ToggleControl,{label:(0,o.__)("Show Last Name","manisha-makhija"),onChange:e=>{l({last_name:e})},checked:t.last_name}),(0,a.createElement)(n.ToggleControl,{label:(0,o.__)("Show Email","manisha-makhija"),onChange:e=>{l({email:e})},checked:t.email}),(0,a.createElement)(n.ToggleControl,{label:(0,o.__)("Show Date","manisha-makhija"),onChange:e=>{l({date:e})},checked:t.date})))];if((0,a.useEffect)((()=>{r()({path:mmApiDataDisplayBlock.custom_endpoint}).then((e=>{w(!0),u(e)}),(e=>{w(!0),d(e)}))}),[]),c)return(0,a.createElement)("p",null,(0,o.sprintf)(/* Translators: %s - error message. */
(0,o.__)("ERROR: %s","manisha-makhija"),c.message)," ");if(!p)return(0,a.createElement)("p",null,(0,o.__)("Loading responseâ€¦","manisha-makhija")," ");if(h){const e=h.data.headers,n=h.data.rows;if(e.length<0||Object.keys(n).length<0)return(0,a.createElement)("p",null,(0,o.__)("No data found in API","manisha-makhija"));E.push([(0,a.createElement)("div",{key:"manisha-makhija-table-data-wrap",className:"manisha-makhija-table-data-wrap"},(0,a.createElement)("table",{border:"1",style:{width:"100%",textAlign:"center"}},h.title&&(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:"5",style:{fontSize:"xx-large",padding:"25px"}},h.title)),(0,a.createElement)("tr",null,(0,a.createElement)(s,{header:e,attributes:t})),(0,a.createElement)(m,{rows:n,attributes:t})))])}return E},save:()=>null})})();